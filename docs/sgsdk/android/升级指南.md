# SGSDK Android 版本升级指南

> 最新正式版本 <font color='red'>1.0.8</font>

# 一、SGSDK Android 通用接入
> 如果之前使用过aar或jar接入，参考 v1.0.6 之前版本升级指南，删除相关配置

请按 [接入说明](sgsdk/client/接入文档.md)开始接入。
## 1. 申请
参考 [获取指南](sgsdk/client/获取.md)
获取的最新接入文件SDK 及 SDK 相关文件 sgsdk-android-zip，其内容结构如下:
```
+--- sgsdk-android-zip
|    \--- sdk_gradle_file
|         +--- app
|              +--- src/main/assets/sgsdk_config.properties // 参数配置文件
|              +--- src/main/assets/sgsdk_project_config.properties // 模块加载配置文件
|              +--- build.gradle      // SDK 基本依赖配置
|              +--- kssgconfig.gradle // SDK 依赖配置文件
|         +--- build.gradle
|         +--- settings.gradle
|    \--- sgsdk-android-demo.apk // demo apk
|    \--- sgsdk-android-demo.zip // demo 源码
|    \--- sgsdk_android_docs.md  // 接入文档
```

## 2. 主工程接入（默认、建议）
### 2.1 添加依赖
build.gradle (project)
```java
buildscript {
    repositories {
        google()
        jcenter()

        maven { url "https://maven.shiyou.kingsoft.com/repository/public/" }

    }
    dependencies {
        classpath "com.android.tools.build:gradle:3.6.3"
        // sgsdk-plugin
        classpath("com.sgsdk.component:kssg-plugin:1.0.6")
    }
}

allprojects {
    repositories {
        google()
        jcenter()

        maven { url "https://maven.shiyou.kingsoft.com/repository/public/" }
    }
}
```
build.gradle(Module:app - or Module:main-name)
```java
// set kssgconfig.gradle
apply from: ("kssgconfig.gradle")

android {
    buildTypes {
        all {
            // you can also set in strings.xml#app_name，and remove this config.
            resValue("string", "app_name", "your_app_name")
        }
    }
}
```

### 2.2 添加参数配置文件
将 sgsdk_config.properties、sgsdk_project_config.txt 两个文件放入(Module:app - or Module:main-name) 下的 assets 目录.
> kssgconfig.gradle 与 参数配置文件，必须放在同一个Module里

## 3. 独立Module接入（适配）
> 如果引擎打包脚本确实无法使用主工程接入方式，可以独立Module接入方式，
注意独立Module接入，确认使用 <font color='red'>kssg-plugin:1.0.6及上版本</font>

### 3.1 添加依赖
build.gradle(project)
```java
buildscript {

    repositories {
        google()
        jcenter()

        maven { url "https://maven.shiyou.kingsoft.com/repository/public/" }

    }
    dependencies {
        classpath "com.android.tools.build:gradle:3.6.3"
        // sgsdk-plugin
        classpath("com.sgsdk.component:kssg-plugin:1.0.6")
    }
}

allprojects {
    repositories {
        google()
        jcenter()

        maven { url "https://maven.shiyou.kingsoft.com/repository/public/" }
    }
}
```
build.gradle(Module:your-lib)
```java
// set kssgconfig.gradle
// remove [apply plugin: "kssgPlugin"] form kssgconfig.gradle

apply from: ("kssgconfig.gradle")

```
build.gradle(Module:app - or Module:main-name)
```java
// set kssgPlugin

apply plugin: "kssgPlugin"

android {
    buildTypes {
        all {
            // you can also set in strings.xml#app_name，and remove this config.
            resValue("string", "app_name", "your_app_name")
        }
    }
}
```

### 3.2 添加参数配置文件
> 注意确保 `sgsdk_config.properties` 在整个工程的 `assets` 目录内是唯一的

将 sgsdk_config.properties、sgsdk_project_config.txt 两个文件放入(Module:app - or Module:main-name) 下的 assets 目录

> kssgconfig.gradle 与 参数配置文件，必须放在同一个Module里
